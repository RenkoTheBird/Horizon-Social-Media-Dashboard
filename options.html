<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Horizon Options</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@100..900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="popup.css" />
    <style>
      body { 
        width: 600px; 
        font-family: "Outfit", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
        font-size: 16px;
        line-height: 1.6;
        padding: 24px;
        background: #f7fafc;
        color: #2d3748;
      }
      h1 { 
        font-size: 28px; 
        font-weight: 700;
        margin: 0 0 24px 0;
        color: #1a202c;
      }
      h2 {
        font-size: 20px;
        font-weight: 600;
        margin: 0 0 16px 0;
        color: #2d3748;
      }
      section { 
        background: #ffffff; 
        padding: 20px; 
        border-radius: 12px; 
        margin-bottom: 20px;
        box-shadow: 0 2px 8px rgba(0,0,0,0.08);
        border: 1px solid #e2e8f0;
      }
      p {
        font-size: 15px;
        color: #4a5568;
        margin: 0 0 16px 0;
        line-height: 1.6;
      }
      label { 
        display: flex; 
        align-items: center; 
        margin: 12px 0;
        font-size: 16px;
        color: #2d3748;
        cursor: pointer;
      }
      label:hover {
        color: #1a202c;
      }
      input[type="checkbox"] { 
        margin-right: 12px; 
        width: 20px;
        height: 20px;
        cursor: pointer;
        accent-color: #2b6cb0;
      }
      button { 
        margin-top: 12px;
        padding: 6px 10px;
        font-size: 13px;
        font-weight: normal;
        border: none;
        border-radius: 6px;
        cursor: pointer;
        background: #2b6cb0;
        color: white;
      }
      button:active:not(:disabled) {
        transform: translateY(1px);
      }
      button:disabled {
        opacity: 0.6;
        cursor: not-allowed;
      }
      #clearBtn {
        background: #e53e3e;
      }
      #clearBtn:hover:not(:disabled) {
        background: #c53030;
      }
      #exportData {
        font-size: 14px; 
        margin-top: 12px; 
        color: #4a5568;
        line-height: 1.6;
        padding: 12px;
        background: #f7fafc;
        border-radius: 6px;
        border: 1px solid #e2e8f0;
        display: none;
      }
      #exportData:not(:empty) {
        display: block;
      }
      input[type="password"], input[type="text"] {
        width: 100%;
        padding: 10px 12px;
        font-size: 15px;
        border: 1px solid #cbd5e0;
        border-radius: 6px;
        margin-top: 8px;
        box-sizing: border-box;
        font-family: monospace;
      }
      input[type="password"]:focus, input[type="text"]:focus {
        outline: none;
        border-color: #2b6cb0;
        box-shadow: 0 0 0 3px rgba(43, 108, 176, 0.1);
      }
      .apiKeyHelp {
        font-size: 13px;
        color: #718096;
        margin-top: 8px;
        line-height: 1.5;
      }
      .apiKeyHelp a {
        color: #2b6cb0;
        text-decoration: none;
      }
      .apiKeyHelp a:hover {
        text-decoration: underline;
      }
    </style>
  </head>
  <body>
    <h1>Horizon Settings</h1>

    <section>
      <h2>Tracking</h2>
      <label><input type="checkbox" id="enableTracking"> Enable post title/snippet tracking (to collect post data)</label>
      <label><input type="checkbox" id="enableML"> Enable topic classification (Logistic Regression)</label>
      <p style="font-size: 13px; color: #718096; margin-top: 16px; margin-bottom: 0;">
        Enable both options for intended functionality.
      </p>
    </section>

    <section>
      <h2>Recommendation Models</h2>
      <label style="margin-bottom: 20px;"><input type="checkbox" id="enableRecommendations"> Enable automatic recommendations at end of day</label>
      <div id="recommendationModelOptions" style="opacity: 0.5; pointer-events: none;">
        <p style="margin-top: 0;">Choose which model to use for generating content recommendations:</p>
        <label>
          <input type="radio" name="recommendationLLM" id="recommendationLLMChatGPT" value="chatgpt" style="width: auto; height: auto; margin-right: 8px;">
          ChatGPT (GPT-4o-mini)
        </label>
        <label>
          <input type="radio" name="recommendationLLM" id="recommendationLLMSmolLM" value="smollm" style="width: auto; height: auto; margin-right: 8px;">
          SmolLM-135M (local model)
        </label>
        <p style="font-size: 13px; color: #718096; margin-top: 8px;">
          <strong>Note:</strong> ChatGPT requires an OpenAI API key and may not always be available. SmolLM runs locally in your browser but recommendations may not be of the best quality.
        </p>
      </div>
    </section>

    <section>
      <h2>Data Management</h2>
      <p style="font-size: 14px; color: #718096; margin-bottom: 16px; padding: 12px; background: #f7fafc; border-radius: 6px; border: 1px solid #e2e8f0;">
        <strong>Note:</strong> The extension stores your daily browsing data including time spent per domain, content type classifications, topic classifications, and post counts. This data is automatically cleared at the end of each day and is not stored long-term. It is only stored locally and is not retained by any third parties.
      </p>
      <div style="display: flex; gap: 8px; align-items: flex-start;">
        <button id="exportBtn">Export Data</button>
        <button id="clearBtn">Clear All Data</button>
      </div>
      <div id="exportData"></div>
    </section>


    <!-- Load options.js as module -->
    <script type="module" src="options.js"></script>
  </body>
</html>

